[TOC]

ì•„ì§ í•˜ëŠ” ì¤‘ ~ 

# QueryDSL

**ğŸ’ SQL ì‹¤ì œ ì‹¤í–‰ ìˆœì„œ**

- FROM : ê° í…Œì´ë¸” í™•ì¸
- ON : ì¡°ì¸ ì¡°ê±´ í™•ì¸
- JOIN : í…Œì´ë¸” ì¡°ì¸ (ë³‘í•©)
- WHERE : ë°ì´í„° ì¶”ì¶œ ì¡°ê±´ í™•ì¸
- GROUP BY : íŠ¹ì • ì¹¼ëŸ¼ìœ¼ë¡œ ë°ì´í„° ê·¸ë£¹í™”
- HAVING : ê·¸ë£¹í™” ì´í›„ ë°ì´í„° ì¶”ì¶œ ì¡°ê±´ í™•ì¸
- SELECT : ë°ì´í„° ì¶”ì¶œ





| JPQL                       | QueryDSL                  |
| -------------------------- | ------------------------- |
| ë¬¸ì ì‹¤í–‰ ì‹œì  ì˜¤ë¥˜ (ë¬¸ì) | ì»´íŒŒì¼ ì‹œì  ì˜¤ë¥˜ (ì½”ë“œ)   |
| íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ì§ì ‘       | íŒŒë¼ë¯¸í„° ë°”ì¸ë”© ìë™ ì²˜ë¦¬ |
|                            |                           |



### JPQL

> SQLì´ ë°ì´í„° ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ ì§ˆì˜ í•œë‹¤ë©´,
>
> JPQLì€ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì¿¼ë¦¬ ì§ˆì˜



- **ìœ ì˜ì‚¬í•­**

  - from ì ˆì— ë“¤ì–´ê°€ëŠ” ê²ƒì€ ê°ì²´

  - ì—”í‹°í‹°ì™€ ì†ì„±ì€ ëŒ€ì†Œë¬¸ì êµ¬ë¶„

    ex) Member ì—”í‹°í‹°, name í•„ë“œ 

  - JPQL í‚¤ì›Œë“œëŠ” ëŒ€ì†Œë¬¸ì£¼ êµ¬ë¶„ X

  - í…Œì´ë¸”ì´ë¦„ X, ì—”í‹°í‹° ì´ë¦„ O

  - ë³„ì¹­ í•„ìˆ˜

- **ê²°ê³¼ ì¡°íšŒ API**
  - query.getResultList()
    - ê²°ê³¼ê°€ í•˜ë‚˜ ì´ìƒì¸ ê²½ìš°, ë¦¬ìŠ¤íŠ¸ ë°˜í™˜
  - query.getSingleResult()
    - ê²°ê³¼ê°€ í•˜ë‚˜, ë‹¨ì¼ ê°ì²´ ë°˜í™˜ (ì•„ë‹ˆë©´ ì˜ˆì™¸ ë°œìƒ)

- **íŒŒë¼ë¯¸í„° ë°”ì¸ë”©**

  - ì´ë¦„ (ì„ í˜¸ë˜ëŠ” ë°©ì‹)
  - ìœ„ì¹˜

- **fetch ì¡°ì¸**

  - fetch type LAZYë¡œ ì„¸íŒ… > í•œêº¼ë²ˆì— ì¡°íšŒê°€ í•„ìš”í•œ ê²½ìš° í˜ì¹˜ ì¡°ì¸ ì‚¬ìš© 

    -  [**JPA N+1ë¬¸ì œ**](https://jojoldu.tistory.com/165)

  - ì—”í‹°í‹° ê°ì²´ ê·¸ë˜í”„ í•œêº¼ë²ˆì— ì¡°íšŒí•˜ëŠ” ë°©ë²•

  - ë³„ì¹­ ì‚¬ìš© X

    ex) ë©¤ë²„ ì¡°íšŒ ì‹œ íŒ€ê¹Œì§€ ê°™ì´ ì¡°íšŒ

    - JPQL 

      ```sql
      select m from Member m join fetch m.team
      ```

    - SQL

      ```sql
      SELECT M.*, T.*
      FROM MEMBER Y
      INNER JOIN TEAM T ON M.TEAM_ID = T.ID
      ```

      cf) ìµœê·¼ jpa2.1 ì€ í˜ì¹˜ì¡°ì¸ ì™¸ì— ì—”í‹°í‹° ê·¸ë˜í”„ë¼ëŠ” ê¸°ëŠ¥ì´ ìƒê¹€

- **Named ì¿¼ë¦¬ - ì •ì ì¿¼ë¦¬**

  > em.createQuery() : ì‚¬ìš©ì ìš”ì²­ ì „ê¹Œì§€ ì—ëŸ¬ ì¡ì„ ìˆ˜ X
  >
  > NamedQuery :  ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œë”© ì‹œì  ì¿¼ë¦¬ íŒŒì‹± > ë°°í¬ ì „ ë¬¸ì œ í•´ê²° ê°€ëŠ¥

  - ë¯¸ë¦¬ ì •ì˜í•´ì„œ ì´ë¦„ì„ ë¶€ì—¬í•´ë‘ê³  ì‚¬ìš©í•˜ëŠ” JPQL 

  - ì–´ë…¸í…Œì´ì…˜, XMLì— ì •ì˜

  - ex

    ```java
    @Entity
    @NamedQuery(
        name = "Member.findByUsername",
        query = "select m from Member m where m.username = :username")
    public vlass Member {
      ...
    }
    ```

    

[ì°¸ê³ 1](https://ict-nroo.tistory.com/116)