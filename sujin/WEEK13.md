





# RESTful API

Representational State Transfer





## κµ¬μ„±

- μμ› (RESOURCE) : URI
- ν–‰μ„ (Verb) : HTTP Method
- ν‘ν„ (Representations)





## νΉμ§•

1. `Stateless` (λ¬΄μƒνƒμ„±)
    1. λ“¤μ–΄μ¤λ” μ”μ²­λ§ λ‹¨μ μ²λ¦¬ (μΏ ν‚¤, μ„Έμ… μ •λ³΄ λ³„λ„ μ €μ¥ κ΄€λ¦¬ X)
    
    β†’ μ„λΉ„μ¤ μμ λ„ λ†’μ•„μ§, λ¶ν•„μ”ν• μ •λ³΄ κ΄€λ¦¬ X
    
2. `Cacheable` (μΊμ‹ κ°€λ¥)
    1. HTTP λΌλ” κΈ°μ΅΄ μ›Ήν‘μ¤€ κ·Έλ€λ΅ μ μ© β†’ HTTP μ μΊμ‹±κΈ°λ¥ μ μ© κ°€λ¥
3. `Client - Server` κµ¬μ΅°
    1. REST Server  : API μ κ³µ
    2. Client : μ‚¬μ©μ μΈμ¦, Context(μ„Έμ…, λ΅κ·ΈμΈμ •λ³΄) λ“± μ§μ ‘κ΄€λ¦¬
    3. κ°κ° μ—­ν•  κµ¬λ¶„, κ°λ° λ‚΄μ© λ…ν™•, μμ΅΄μ„± κ°μ†
4. `κ³„μΈµν• κµ¬μ΅°`
    1. λ‹¤μ¤‘κ³„μΈµ
    2. λ³΄μ•, λ΅λ“λ°Έλ°μ‹±, μ•”νΈν™” κ³„μΈµ μ¶”κ°€ β†’ κµ¬μ΅°μƒμ μ μ—°μ„±
    3. Proxy, Gateway κ°™μ€ λ„¤νΈμ›ν¬ κΈ°λ°μ μ¤‘κ°„ λ§¤μ²΄ μ‚¬μ©
    







## λ””μμΈ κ°€μ΄λ“

- URI λ” μ •λ³΄μ μμ›μ„ ν‘ν„
- μμ›μ— λ€ν• ν–‰μ„λ” HTTP Method (GET, POST, PUT, DELETE) λ΅ ν‘ν„
    - ex) DELETE /members/1





**π’΅ μ£Όμμ **

- ** μ¬λμ‹ κµ¬λ¶„μ(/) λ” κ³„μΈµ κ΄€κ³„λ¥Ό λ‚νƒ€λ‚΄λ” λ° μ‚¬μ©
  ex) http://restapi.example.com/animals/mammals/whales

- ν–‰μ„(method)λ” URL μ— ν¬ν•¨ X

- URI λ§μ§€λ§‰ λ¬Έμλ΅ μ¬λμ‹ (/) ν¬ν•¨ X

- ν•μ΄ν”(-) μ€ URI κ°€λ…μ„±μ„ λ†’μ΄λ” λ° μ‚¬μ©

- λ°‘μ¤„ (_) μ€ URI μ— μ‚¬μ©ν•μ§€ μ•μ

- URI κ²½λ΅μ—λ” μ†λ¬Έμ

- νμΌ ν™•μ¥μλ” URI μ— ν¬ν•¨μ‹ν‚¤μ§€ μ•λ”λ‹¤.
ex) [http://restapi.example.com/members/soccer/345/photo.jpg](http://restapi.example.com/members/soccer/345/photo.jpg) (X)



<aside>
π“ **λ¦¬μ†μ¤κ°„ κ΄€κ³„ ν‘ν„ λ°©λ²•**

```
/λ¦¬μ†μ¤λ…/λ¦¬μ†μ¤ ID/κ΄€κ³„κ°€ μλ” λ‹¤λ¥Έ λ¦¬μ†μ¤λ…

* μΌλ°μ 
GET : /users/{userid}/devices (μΌλ°μ μΌλ΅ μ†μ  β€hasβ€™μ κ΄€κ³„λ¥Ό ν‘ν„ν•  λ•)

* κµ¬μ²΄μ 
GET : /users/{userid}/likes/devices (κ΄€κ³„λ…μ΄ μ• λ§¤ν•κ±°λ‚ κµ¬μ²΄μ  ν‘ν„μ΄ ν•„μ”ν•  λ•)
```









## HTTP Headers

- Content-Type
    - application/json μ„ μ°μ„  μ κ³µ









## HTTP Methods

- `GET`, `POST`, `PUT`, `DELETE` λ” λ°λ“μ‹ μ κ³µ
- `OPTIONS`
    - ν„μ¬ End-Point κ°€ μ κ³µκ°€λ¥ν• API Method μ‘λ‹µ
    
    ```java
    OPTIONS /users/hak
    
    HTTP/1.1 200 OK
    Allow: GET,PUT,DELETE,OPTIONS,HEAD
    ```
    
- `HEAD`
    - μ”μ²­μ— λ€ν• Header μ •λ³΄λ§ μ‘λ‹µ
    - Body μ—†μ
    
    ```java
    HEAD /users
    
    HTTP/1.1 200 OK
    Content-Type: application/json
    Content-Length: 120
    ```
    
- `PATCH`
    - PUT λ€μ‹  PATCH method μ‚¬μ©
    - μμ›μ μΌλ¶€λ¥Ό μμ •ν•  λ•λ” PATCHκ°€ λ©μ μ— λ§λ” method
    
    ```java
    // PUT μ κ²½μ° λ°”λ€μ§€ μ•λ” μ†μ„±λ„ ν•¨κ» λ³΄λ‚΄μ•Ό ν•¨
    
    PUT /users/1
    {
        "name": "hak"
        "level": 11
    }
    
    ## PATCH λ¥Ό μ΄μ©ν•μ—¬ λ³€κ²½ν•λ” μ†μ„±λ§ μ „λ‹¬ ##
    
    // PATCH μ”μ²­
     PATCH /users/1
    {
        "level": 11
    }
    
    // PATCH μ‘λ‹µ
    HTTP/1.1 200 OK
    {
        "name": "hak",
        "level": 11
    }
    ```
    







## HTTP μƒνƒμ½”λ“

μ •ν™•ν• μ‘λ‹µμ μƒνƒμ½”λ“λ§μΌλ΅λ„ λ§μ€ μ •λ³΄ μ „λ‹¬ κ°€λ¥

- μ„±κ³µ μ‘λ‹µ : `2XX`
- μ‹¤ν¨ μ‘λ‹µ : `4XX`
- `5XX` μ—λ¬λ” μ λ€ μ‚¬μ©μμ—κ² λ‚νƒ€λ‚΄μ„  μ•λ¨.

| μƒνƒμ½”λ“ |  |
| --- | --- |
| 200 [OK] | ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ •μƒμ μΌλ΅ μν–‰ν•¨ |
| 201 [Created] | ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ– ν• λ¦¬μ†μ¤ μƒμ„±μ„ μ”μ²­, ν•΄λ‹Ή λ¦¬μ†μ¤κ°€ μ„±κ³µμ μΌλ΅ μƒμ„±λ¨(POSTλ¥Ό ν†µν• λ¦¬μ†μ¤ μƒμ„± μ‘μ—… μ‹) |
| 202 [Accepted] | ν΄λΌμ΄μ–ΈνΈμ—κ² μ”μ²­μ„ λ°›μ€ ν›„, μ”μ²­μ€ μ ν¨ν•λ‚ μ„λ²„κ°€ μ•„μ§ μ²λ¦¬ν•μ§€ μ•μ€ κ²½μ°μ— μ‘λ‹µ (λΉ„λ™κΈ° μ‘μ—…) |
| 204 [No Content] | μ‘λ‹µ body κ°€ ν•„μ” μ—†λ” μμ› μ‚­μ  μ”μ²­(DELETE) κ°™μ€ κ²½μ° μ‘λ‹µ |
| 400 [Bad Request] | ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ΄ λ¶€μ μ  ν•  κ²½μ° μ‚¬μ©ν•λ” μ‘λ‹µ μ½”λ“<br /> νλΌλ―Έν„°μ μ„μΉ(path, query, body) , μ‚¬μ©μ μ…λ ¥ κ°’, μ—λ¬ μ΄μ  λ“±μ„ λ°λ“μ‹ μ•λ¦°λ‹¤. |
| 401 [Unauthorized] | μΈμ¦<br />ν΄λΌμ΄μ–ΈνΈκ°€ μΈμ¦λμ§€ μ•μ€ μƒνƒμ—μ„ λ³΄νΈλ λ¦¬μ†μ¤λ¥Ό μ”μ²­ν–μ„ λ• μ‚¬μ©ν•λ” μ‘λ‹µ μ½”λ“<br/>(λ΅κ·ΈμΈ ν•μ§€ μ•μ€ μ μ €κ°€ λ΅κ·ΈμΈ ν–μ„ λ•, μ”μ²­ κ°€λ¥ν• λ¦¬μ†μ¤λ¥Ό μ”μ²­ν–μ„ λ•) |
| 403 [Forbidden] | κ¶ν•<br/>μ μ € μΈμ¦μƒνƒμ™€ κ΄€κ³„ μ—†μ΄ μ‘λ‹µν•κ³  μ‹¶μ§€ μ•μ€ λ¦¬μ†μ¤λ¥Ό ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν–μ„ λ• μ‚¬μ©ν•λ” μ‘λ‹µ μ½”λ“<br/>ν•΄λ‹Ή μ”μ²­μ€ μ ν¨ν•λ‚ μ„λ²„ μ‘μ—… μ¤‘ μ ‘κ·Ό ν—μ©λμ§€ μ•μ€ μμ›μ„ μ΅°νν•λ ¤λ” κ²½μ° |
| 404 [Not Found] |  |
| 405 [Method Not Allowed] | ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν• λ¦¬μ†μ¤μ—μ„λ” μ‚¬μ© λ¶κ°€λ¥ν• Methodλ¥Ό μ΄μ©ν–μ„ κ²½μ° μ‚¬μ©ν•λ” μ‘λ‹µ μ½”λ“ |
| 409 [Conflict] | ν•΄λ‹Ή μ”μ²­μ μ²λ¦¬κ°€ λΉ„μ¦λ‹μ¤ λ΅μ§μƒ λ¶κ°€λ¥ν•κ±°λ‚ λ¨μμ΄ μƒκΈ΄ κ²½μ° |
| 429 [Too Many Requests] |  |
| 301 | ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν• λ¦¬μ†μ¤μ— λ€ν• URIκ°€ λ³€κ²½ λμ—μ„ λ• μ‚¬μ©ν•λ” μ‘λ‹µ μ½”λ“<br />(μ‘λ‹µ μ‹ Location headerμ— λ³€κ²½λ URI λ¥Ό μ μ–΄ μ¤μ•Ό ν•©λ‹λ‹¤.) |
| 500 | μ„λ²„μ— λ¬Έμ κ°€ μμ„ κ²½μ° μ‚¬μ©ν•λ” μ‘λ‹µ μ½”λ“ (apache, nginx) <br />μ λ€ μ‚¬μ©μμ—κ² λ‚νƒ€λ‚΄μ§€ λ§ κ²ƒ |





[μ°Έμ΅°]( https://sanghaklee.tistory.com/61)